<% if (title) { %>
  <h1><%= title %></h1>
<% } else { 
  res.redirect('/')
} %>

<%- messages() %>

<% if (errors) { %>
  <ul class="notice">
    <% errors.array().forEach(error => { %>
      <li><%= error.msg %></li>
    <% }) %>
  </ul>
<% } %>

<form id="addInventoryForm" action="/inv/update" method="post">
  <fieldset>
    <legend>Modify Vehicle</legend>
    
    <p><em>All fields are required</em></p>
    
    <div class="form-row">
      <div class="form-group">
        <label for="classification_id">Classification:</label>
        <%- classificationSelect %>
      </div>
      
      <div class="form-group">
        <label for="inv_make">Make:</label>
        <input type="text" id="inv_make" name="inv_make" required 
               placeholder="Min of 3 characters"
               value="<%= locals.inv_make %>">
      </div>
      
      <div class="form-group">
        <label for="inv_model">Model:</label>
        <input type="text" id="inv_model" name="inv_model" required 
               placeholder="Min of 3 characters"
               value="<%= locals.inv_model %>">
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-group full-width">
        <label for="inv_description">Description:</label>
        <textarea id="inv_description" name="inv_description" required 
                  rows="3"><%= locals.inv_description %></textarea>
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-group">
        <label for="inv_image">Image Path:</label>
        <input type="text" id="inv_image" name="inv_image" required 
               value="<%= locals.inv_image %>">
      </div>
      
      <div class="form-group">
        <label for="inv_thumbnail">Thumbnail Path:</label>
        <input type="text" id="inv_thumbnail" name="inv_thumbnail" required 
               value="<%= locals.inv_thumbnail %>">
      </div>
    </div>
    
    <div class="form-row">
      <div class="form-group">
        <label for="inv_price">Price:</label>
        <input type="number" id="inv_price" name="inv_price" required 
               placeholder="Decimal or integer" step="0.01"
               value="<%= locals.inv_price %>">
      </div>
      
      <div class="form-group">
        <label for="inv_year">Year:</label>
        <input type="number" id="inv_year" name="inv_year" required 
               placeholder="4-digit year" min="1900" max="2030"
               value="<%= locals.inv_year %>">
      </div>
      
      <div class="form-group">
        <label for="inv_miles">Miles:</label>
        <input type="number" id="inv_miles" name="inv_miles" required 
               placeholder="Digits only"
               value="<%= locals.inv_miles %>">
      </div>
      
      <div class="form-group">
        <label for="inv_color">Color:</label>
        <input type="text" id="inv_color" name="inv_color" required 
               value="<%= locals.inv_color %>">
      </div>
    </div>
    
    <!-- Hidden field for inventory ID -->
    <input type="hidden" name="inv_id" value="<%= locals.inv_id %>">
    
    <input type="submit" value="Update Vehicle" id="updateBtn" disabled>
  </fieldset>
</form>

<script src="/js/inv-update.js"></script>